import{c as o,A as M,h as B,r as p,j as z,a as i,b as y,d as w,e as _,t as C,w as u,J as T,k as Z,u as j,l as I,n as q,s as W,P as G,f as U}from"./index-uDXqgQ0i.js";import{f as H}from"./formatDate-DZmpU-DR.js";var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};const X=Q;function $(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable}))),r.forEach(function(s){Y(t,s,a[s])})}return t}function Y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var A=function(e,a){var r=$({},e,a.attrs);return o(M,$({},r,{icon:X}),null)};A.displayName="SendOutlined";A.inheritAttrs=!1;const K=A,tt=async t=>{try{return(await axios.post(`${B.baseURL}/comments/`,t)).data}catch(e){console.log(e)}},et={class:"mb-3"},nt={class:"required form-label"},at={},ot=Object.assign(at,{__name:"InputArea",props:{title:{type:String,default:""},placeholder:{type:String,default:""},rows:{type:Number,default:4},type:{type:String,default:"input"},value:{type:String,default:""}},emits:["submitComment","input"],setup(t,{emit:e}){const a=t,r=e,s=p(a.value);z(()=>a.value,()=>s.value=a.value);const O=()=>{r("submitComment",s.value),s.value=""};return(b,v)=>{const f=i("a-textarea"),S=i("a-button"),x=i("a-input-group");return y(),w("div",et,[_("div",nt,C(t.title),1),_("div",null,[o(x,null,{default:u(()=>[o(f,{placeholder:t.placeholder,rows:t.rows,value:s.value,"onUpdate:value":v[0]||(v[0]=h=>s.value=h),maxlength:200,style:T({width:t.type==="comment"?"calc(100% - 46px)":"100%"}),onInput:v[1]||(v[1]=()=>r("input",s.value))},null,8,["placeholder","rows","value","style"]),t.type=="comment"?(y(),Z(S,{key:0,type:"primary",class:"absolute h-100 bg-[#654321] text-white hover:text-black",onClick:O},{default:u(()=>[o(j(K),{class:""})]),_:1})):I("",!0)]),_:1})])])}}}),st={class:"comments mt-3"},rt={key:0},lt={class:"clearfix"},it={key:0},ct=_("div",{style:{"margin-top":"8px"}},"Upload",-1),ut=["src"],mt=["href"],dt={},vt=Object.assign(dt,{__name:"Comment",props:{comments:{type:Array,default:()=>[]}},emits:["submitComment"],setup(t,{emit:e}){const a=q(),r=W(),s=t,O=e,b=p({content:"",post_id:a.params.id,user_id:""}),v=n=>{b.value.content=n,b.value.user_id=r.user.id,(async()=>{try{await tt(b.value),O("submitComment")}catch(l){console.log("Error: ",l)}})()},f=p([]);z(()=>s.comments,async n=>{const c=[];for(let l=0;l<n.length;l++){const m=H(n[l].created_at);let g={href:"https://www.antdv.com/",title:n[l].user.name,avatar:"",description:m,content:n[l].content};if(f.value.length>0){f.value.unshift(g);break}c.push(g)}c.length>0&&(f.value=c)});const S={onChange:n=>{},pageSize:5};function x(n){return new Promise((c,l)=>{const m=new FileReader;m.readAsDataURL(n),m.onload=()=>c(m.result),m.onerror=g=>l(g)})}const h=p(!1),L=p(""),P=p(""),k=p([{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]),R=()=>{h.value=!1,P.value=""},V=async n=>{!n.url&&!n.preview&&(n.preview=await x(n.originFileObj)),L.value=n.url||n.preview,h.value=!0,P.value=n.name||n.url.substring(n.url.lastIndexOf("/")+1)};return(n,c)=>{const l=i("a-descriptions"),m=i("a-upload"),g=i("a-modal"),D=i("a-divider"),N=i("a-avatar"),E=i("a-list-item-meta"),F=i("a-list-item"),J=i("a-list");return y(),w("div",st,[o(l,{title:"Bình luận"}),j(r).token?(y(),w("div",rt,[_("div",null,[o(ot,{type:"comment",onSubmitComment:v})]),_("div",lt,[o(m,{"file-list":k.value,"onUpdate:fileList":c[0]||(c[0]=d=>k.value=d),action:"arn:aws:s3:::ptit-store-img","list-type":"picture-card",onPreview:V},{default:u(()=>[k.value.length<8?(y(),w("div",it,[o(j(G)),ct])):I("",!0)]),_:1},8,["file-list"]),o(g,{open:h.value,title:P.value,footer:null,onCancel:R},{default:u(()=>[_("img",{alt:"example",style:{width:"100%"},src:L.value},null,8,ut)]),_:1},8,["open","title"])])])):I("",!0),o(D),o(J,{"item-layout":"vertical",size:"large",pagination:S,"data-source":f.value},{renderItem:u(({item:d})=>[o(F,{key:"item.title"},{default:u(()=>[o(E,{description:d.description},{title:u(()=>[_("a",{href:d.href},C(d.title),9,mt)]),avatar:u(()=>[o(N,{src:d.avatar,size:"medium",class:"me-2",style:{backgroundColor:"#f50",verticalAlign:"middle"}},{default:u(()=>[U(C(d.title[0]),1)]),_:2},1032,["src"])]),_:2},1032,["description"]),U(" "+C(d.content),1)]),_:2},1024)]),_:1},8,["data-source"])])}}}),ft={getById:async t=>{try{return(await axios.get(`${B.baseURL}/posts/${t}`)).data}catch(e){console.error(e)}}};export{ot as _,vt as a,ft as g};
