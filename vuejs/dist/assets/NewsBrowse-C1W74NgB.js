import{m as X,E as H}from"./message-Cjuqcqqe.js";import{u as Z}from"./useSider-BAFr6GtI.js";import{f as N}from"./formatDate-DZmpU-DR.js";import{l as q}from"./index-B8geXA2g.js";import{_ as R}from"./ThePageHeader-Bgrj-Al6.js";import{c as t,A as G,r as T,i as J,v as Q,b as _,d as y,e as d,w as e,u as m,F as E,f as s,t as x,l as j,a as n,k as W}from"./index-uDXqgQ0i.js";import{U as O}from"./UserOutlined-C6Ifm4N5.js";import{F as Y}from"./FilterOutlined-D8WW8et8.js";var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const et=tt;function A(c){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?Object(arguments[a]):{},r=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable}))),r.forEach(function(p){at(c,p,o[p])})}return c}function at(c,a,o){return a in c?Object.defineProperty(c,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):c[a]=o,c}var P=function(a,o){var r=A({},a,o.attrs);return t(G,A({},r,{icon:et}),null)};P.displayName="SyncOutlined";P.inheritAttrs=!1;const nt=P,st={class:"card"},ot={class:"card-header flex justify-between flex-wrap pb-4"},lt={class:"card-title"},ct={class:"card-toolbar"},dt={class:"flex justify-end"},it={class:"card-body"},rt={style:{"margin-bottom":"16px"}},ut={style:{"margin-left":"8px"}},_t={key:0},mt={key:1},pt={key:3},ft={key:4,class:"line-clamp-2"},yt={components:{ThePageHeader:R}},St=Object.assign(yt,{__name:"NewsBrowse",setup(c){Z();const a=T(!1),o=()=>{a.value=!0},r=g=>{a.value=!1},p=[{title:"Người đăng",dataIndex:"username"},{title:"Tiêu đề",dataIndex:"title",width:350},{title:"Địa chỉ",dataIndex:"address"},{title:"Ngày đăng",dataIndex:"created_at"},{title:"Trạng thái",dataIndex:"status"},{title:"Chi tiết bài viết",dataIndex:"detail",key:"detail"}],b=T([]);(async()=>{b.value=[];const g=await q.getPostPending(),h=[];for(const l of g)h.push({id:l.id,username:l.user.name,title:l.title,address:l.address,created_at:N(l.created_at),updated_at:N(l.updated_at),view:1e3,sold_status:l.sold_status,status:l.status.name});b.value=h})();const i=J({selectedRowKeys:[],loading:!1}),S=Q(()=>i.selectedRowKeys.length>0),B=()=>{i.loading=!0,setTimeout(()=>{i.loading=!1,i.selectedRowKeys=[]},1e3)},K=g=>{i.selectedRowKeys=g};return(g,h)=>{const l=n("a-input-search"),w=n("a-menu-item"),D=n("a-menu"),v=n("a-button"),F=n("a-dropdown"),k=n("a-select-option"),L=n("a-select"),C=n("a-form-item"),M=n("a-range-picker"),V=n("a-form"),$=n("a-modal"),z=n("router-link"),I=n("a-tag"),U=n("a-table");return _(),y(E,null,[t(R),d("div",st,[d("div",ot,[d("div",lt,[t(l,{placeholder:"Tìm kiếm",style:{width:"200px"}})]),d("div",ct,[d("div",dt,[t(F,{trigger:"click"},{overlay:e(()=>[t(D,null,{default:e(()=>[t(w,{key:"1"},{default:e(()=>[t(m(O)),s(" Trạng thái ")]),_:1}),t(w,{key:"2"},{default:e(()=>[t(m(O)),s(" Ngày đăng ")]),_:1}),t(w,{key:"3"},{default:e(()=>[t(m(O)),s(" 3rd item ")]),_:1})]),_:1})]),default:e(()=>[t(v,{class:"me-3"},{icon:e(()=>[t(m(Y))]),default:e(()=>[s(" Lọc ")]),_:1})]),_:1}),t(v,{class:"",onClick:o},{icon:e(()=>[t(m(H))]),default:e(()=>[s(" Xuất file ")]),_:1}),t($,{open:a.value,"onUpdate:open":h[0]||(h[0]=u=>a.value=u),title:"Xuất file",cancelText:"Huỷ",okText:"Xuất file",onOk:()=>{r(),m(X).success()}},{default:e(()=>[t(V,{layout:"horizontal",style:{"max-width":"600px"}},{default:e(()=>[t(C,{label:"Loại file"},{default:e(()=>[t(L,null,{default:e(()=>[t(k,{value:"excel"},{default:e(()=>[s("Excel")]),_:1}),t(k,{value:"admin"},{default:e(()=>[s("PDF")]),_:1}),t(k,{value:"admin"},{default:e(()=>[s("Zip")]),_:1})]),_:1})]),_:1}),t(C,{label:"Khoảng thời gian"},{default:e(()=>[t(M)]),_:1})]),_:1})]),_:1},8,["open","onOk"])])])]),d("div",it,[d("div",null,[d("div",rt,[t(v,{type:"primary",disabled:!S.value,loading:i.loading,onClick:B},{default:e(()=>[s(" Duyệt tin ")]),_:1},8,["disabled","loading"]),d("span",ut,[S.value?(_(),y(E,{key:0},[s(x(`Đã chọn ${i.selectedRowKeys.length} tin`),1)],64)):j("",!0)])]),t(U,{"row-selection":{selectedRowKeys:i.selectedRowKeys,onChange:K},columns:p,"data-source":b.value,scroll:{x:1500}},{bodyCell:e(({column:u,record:f})=>[u.key==="detail"?(_(),y("div",_t,[t(z,{to:{name:"admin-news-detail",params:{id:f.id}}},{default:e(()=>[t(v,{type:"",style:{color:"red"}},{default:e(()=>[s("Chi tiết")]),_:1})]),_:2},1032,["to"])])):u.dataIndex==="username"?(_(),y("a",mt,x(f.username),1)):u.dataIndex==="sold_status"?(_(),W(I,{key:2,color:f.sold_status===1?"#87d068":f.sold_status===0?"#f50":""},{default:e(()=>[s(x(f.sold_status==1?"đã bán":"chưa bán"),1)]),_:2},1032,["color"])):u.dataIndex==="status"?(_(),y("div",pt,[t(I,{color:"processing"},{icon:e(()=>[t(m(nt),{spin:!0})]),default:e(()=>[s(" chờ duyệt ")]),_:1})])):u.dataIndex==="title"?(_(),y("div",ft,x(f.title),1)):j("",!0)]),_:1},8,["row-selection","data-source"])])])])],64)}}});export{St as default};
