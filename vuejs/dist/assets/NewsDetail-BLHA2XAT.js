import{u as le}from"./useSider-BAFr6GtI.js";import{_ as J}from"./ThePageHeader-Bgrj-Al6.js";import{g as W,_ as K,a as A}from"./getDetails-CoRWjPP0.js";import{c as e,A as ae,r as d,j,a as g,b as h,d as C,e as o,t as Q,F as M,n as X,i as Y,w as u,k as D,u as U,L as ne,P as se,l as q,q as V,s as oe,f as G}from"./index-uDXqgQ0i.js";import{_ as b}from"./Card-BZYKnWzI.js";import{a as H}from"./address-CGMVsi11.js";import"./formatDate-DZmpU-DR.js";var ie={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};const ce=ie;function R(c){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?Object(arguments[s]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),i.forEach(function(l){re(c,l,n[l])})}return c}function re(c,s,n){return s in c?Object.defineProperty(c,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[s]=n,c}var E=function(s,n){var i=R({},s,n.attrs);return e(ae,R({},i,{icon:ce}),null)};E.displayName="InboxOutlined";E.inheritAttrs=!1;const ue=E,de={class:"mb-3"},pe={class:"required form-label"},k={__name:"InputBasic",props:{title:String,placeholder:String,value:{type:String,default:""}},emits:["input"],setup(c,{emit:s}){const n=c,i=s,l=d(n.value);return j(()=>n.value,(_,r)=>{_&&(l.value=_)}),(_,r)=>{const x=g("a-input");return h(),C("div",de,[o("div",pe,Q(c.title),1),e(x,{placeholder:c.placeholder,value:l.value,"onUpdate:value":r[0]||(r[0]=w=>l.value=w),onInput:r[1]||(r[1]=()=>i("input",l.value))},null,8,["placeholder","value"])])}}},ve={class:"form-label"},B={__name:"InputSelect",props:{title:String,valueSelected:String,options:Array},setup(c){const s=c,n=d(s.valueSelected);return j(()=>s.valueSelected,(i,l)=>{i&&(n.value=i)}),(i,l)=>{const _=g("a-select");return h(),C(M,null,[o("div",ve,Q(c.title),1),e(_,{value:n.value,"onUpdate:value":l[0]||(l[0]=r=>n.value=r),options:c.options,class:"mb-2 w-100 flex justify-between align-items-center"},null,8,["value","options"])],64)}}},_e=["src"],fe={key:1},me=o("div",{class:"ant-upload-text"},"Tải ảnh lên",-1),he={class:"mb-3"},ge={components:{InputSelect:B,Card:b}},Z=Object.assign(ge,{__name:"TheMainColumn",setup(c){function s(p,f){const m=new FileReader;m.addEventListener("load",()=>f(m.result)),m.readAsDataURL(p)}const n=d([]),i=d(!1),l=d(""),_=p=>{if(p.file.status==="uploading"){i.value=!0;return}p.file.status==="done"&&s(p.file.originFileObj,f=>{l.value=f,i.value=!1}),p.file.status==="error"&&(i.value=!1,V.error("Tải ảnh lên thất bại!"))},r=p=>{const f=p.type==="image/jpeg"||p.type==="image/png";f||V.error("Bạn chỉ có thể tải lên file JPG/PNG!");const m=p.size/1024/1024<2;return m||V.error("Ảnh phải nhỏ hơn 2MB!"),f&&m},x=X(),w=d(!1),S=Y({title:"",description:"",area:"",price:"",unit:"",sold_status:"",status:"",user:""});x.params.id&&(w.value=!0,(async f=>{const m=await W.getById(f);Object.keys(S).forEach(O=>{S[O]=m[O]})})(x.params.id));const N=d([{value:"1",label:"Đã bán"},{value:"0",label:"Chưa bán"}]),L=d([{value:"3",label:"Chờ duyệt"},{value:"4",label:"Công khai"},{value:"5",label:"Không công khai"}]);return(p,f)=>{const m=g("a-upload"),O=g("a-statistic"),I=g("a-col");return h(),C(M,null,[e(b,{title:"Hình ảnh chính"},{content:u(()=>[e(m,{"file-list":n.value,"onUpdate:fileList":f[0]||(f[0]=P=>n.value=P),name:"avatar","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","before-upload":r,onChange:_},{default:u(()=>[l.value?(h(),C("img",{key:0,src:l.value,alt:"avatar"},null,8,_e)):(h(),C("div",fe,[i.value?(h(),D(U(ne),{key:0})):(h(),D(U(se),{key:1})),me]))]),_:1},8,["file-list"])]),_:1}),w.value==!0?(h(),D(b,{key:0,title:"Trạng thái"},{content:u(()=>{var P,a;return[o("div",he,[e(B,{valueSelected:S.sold_status.toString(),options:N.value,title:"Trạng thái bán"},null,8,["valueSelected","options"])]),o("div",null,[e(B,{valueSelected:(a=(P=S.status)==null?void 0:P.id)==null?void 0:a.toString(),options:L.value,title:"Trạng thái bài viết"},null,8,["valueSelected","options"])])]}),_:1})):q("",!0),w.value==!0?(h(),D(b,{key:1,title:"Thống kê lượt xem"},{content:u(()=>[e(I,{class:"col-12"},{default:u(()=>[e(O,{title:"Lượt xem tháng hiện tại:",value:112})]),_:1}),e(I,{class:"col-12"},{default:u(()=>[e(O,{title:"Tổng lượt xem:",value:1e3})]),_:1})]),_:1})):q("",!0)],64)}}}),be={class:"tab-content"},ye={class:"flex flex-col gap-7 gap-lg-10"},xe={class:"mb-3 space-y-3"},we=o("div",{class:"form-label"},"Địa điểm",-1),Se={class:"flex justify-between flex-wrap"},Ie={class:"col-12 col-xl-8"},Oe={class:"col-12 col-xl-3"},$e={class:"mb-2"},Ce={class:"ant-upload-drag-icon"},Pe=o("p",{class:"ant-upload-text"}," Click hoặc kéo thả file vào đây để tải lên ",-1),Te=o("p",{class:"ant-upload-hint"}," Hỗ trợ tải lên nhiều file cùng lúc ",-1),ke={class:"flex flex-col gap-7 gap-lg-10"},Be={class:"flex justify-end mb-4"},Ne={components:{InputArea:K,Comment:A,InputBasic:k,InputSelect:B,Card:b}},ee=Object.assign(Ne,{__name:"TheDetailColumn",setup(c){const s=oe(),n=X(),i=d(!1),l=Y({title:"",description:"",address:"",address_detail:"",area:"",price:"",unit:"",sold_status:"",status:"",user:""}),_=d(null),r=d(null),x=d(null);n.params.id||(Object.keys(l).forEach(a=>{l[a]=""}),i.value=!0),n.params.id&&(async t=>{const y=await W.getById(t);Object.keys(l).forEach(T=>{l[T]=y[T]})})(n.params.id);const w=d([]),S=d([]),N=d([]),L=async()=>{try{const a=await H.getProvinces();w.value=a.map(t=>({value:t.province_id,label:t.province_name}))}catch(a){console.error(a)}},p=async a=>{try{const t=await H.getDistrictsByProvinceId(a);S.value=t.map(y=>({value:y.district_id,label:y.district_name}))}catch(t){console.error(t)}},f=async()=>{try{const a=await H.getWardsByDistrictId(r.value);N.value=a.map(t=>({value:t.ward_id,label:t.ward_name}))}catch(a){console.error(a)}};j(_,(a,t)=>{p(_.value),r.value=null}),j(r,(a,t)=>{f(r.value),x.value=null}),L(),p(_.value),f(r.value);const m=(a,t)=>t.label.toLowerCase().indexOf(a.toLowerCase())>=0,O=d([{value:"1",label:"VND"},{value:"2",label:"Giá/m2"},{value:"3",label:"Thỏa thuận"}]),I=(a,t)=>{l[a]=t},P=async()=>{try{const a=w.value.find($=>$.value===_.value).label,t=S.value.find($=>$.value===r.value).label,y=N.value.find($=>$.value===x.value).label,T={title:l.title,description:l.description,address:`${y}, ${t}, ${a}`,address_detail:l.address_detail,area:Number(l.area),price:Number(l.price),unit:Number(l.unit),sold_status:0,status:3,user_id:s.user.id};console.log(T)}catch(a){console.error(a)}};return(a,t)=>{const y=g("a-select"),T=g("a-form"),$=g("a-upload-dragger"),z=g("a-tab-pane"),te=g("a-tabs"),F=g("a-button");return h(),C(M,null,[e(te,null,{default:u(()=>[e(z,{key:"1",tab:"Tổng quan"},{default:u(()=>[o("div",be,[o("div",ye,[e(b,{title:"Thông tin cơ bản"},{content:u(()=>[o("div",xe,[we,e(y,{class:"w-100",placeholder:"Tỉnh/Thành",value:_.value,"onUpdate:value":t[0]||(t[0]=v=>_.value=v),"show-search":"",allowClear:"",options:w.value,"filter-option":m},null,8,["value","options"]),e(y,{class:"w-100",placeholder:"Quận/Huyện",value:r.value,"onUpdate:value":t[1]||(t[1]=v=>r.value=v),"show-search":"",allowClear:"",options:S.value,"filter-option":m},null,8,["value","options"]),e(y,{class:"w-100",placeholder:"Phường/Xã",value:x.value,"onUpdate:value":t[2]||(t[2]=v=>x.value=v),"show-search":"",allowClear:"",options:N.value,"filter-option":m},null,8,["value","options"])]),e(T,null,{default:u(()=>[e(k,{title:"Địa chỉ hiển thị trên tin đăng",placeholder:"Bạn có thể bổ sung hẻm, ngách, ngõ, ...",value:l.address_detail,onInput:t[3]||(t[3]=v=>I("address_detail",v))},null,8,["value"])]),_:1})]),_:1}),e(b,{title:"Thông tin bài viết"},{content:u(()=>[e(k,{title:"Tiêu đề",placeholder:"Nhập tiêu đề bài viết",value:l.title,onInput:t[4]||(t[4]=v=>I("title",v))},null,8,["value"]),e(K,{title:"Mô tả",placeholder:"Nhập mô tả bài viết",value:l.description,rows:6,onInput:t[5]||(t[5]=v=>I("description",v))},null,8,["value"])]),_:1}),e(b,{title:"Thông tin bất động sản"},{content:u(()=>[e(k,{title:"Diện tích",placeholder:"Nhập diện tích, VD: 80",value:l.area.toString(),onInput:t[6]||(t[6]=v=>I("area",v))},null,8,["value"]),o("div",Se,[o("div",Ie,[e(k,{title:"Mức giá",placeholder:"Nhập giá, VD: 12000000",value:l.price.toString(),onInput:t[7]||(t[7]=v=>I("price",v))},null,8,["value"])]),o("div",Oe,[e(B,{title:"Đơn vị",options:O.value,valueSelected:l.unit.toString()},null,8,["options","valueSelected"])])])]),_:1}),e(b,{title:"Hình ảnh & Video"},{content:u(()=>[o("div",$e,[e($,{name:"file",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},{default:u(()=>[o("p",Ce,[e(U(ue))]),Pe,Te]),_:1})])]),_:1})])])]),_:1}),e(z,{key:"2",tab:"Bình luận","force-render":"",disabled:i.value},{default:u(()=>[o("div",ke,[e(b,null,{content:u(()=>[e(A)]),_:1})])]),_:1},8,["disabled"])]),_:1}),o("div",Be,[e(F,{type:"default"},{default:u(()=>[G("Hủy")]),_:1}),e(F,{type:"primary",class:"mx-4",onClick:P},{default:u(()=>[G("Lưu")]),_:1})])],64)}}}),De={class:"w-100"},je={class:"flex flex-col xl:flex-row w-100"},Le={class:"flex flex-col col-12 col-xl-4 gap-3 gap-lg-5",style:{"background-color":"white"}},Ve={class:"flex flex-col col-12 col-xl-8 gap-7 gap-lg-10 px-3 px-lg-5",style:{"background-color":"white"}},He={components:{ThePageHeader:J,Comment:A,InputBasic:k,InputSelect:B,Card:b,TheMainColumn:Z,TheDetailColumn:ee}},Ge=Object.assign(He,{__name:"NewsDetail",setup(c){const s=le();return s.onSiderOpenKeys(["sub1"]),s.onSiderSelectedKeys(["2"]),(n,i)=>(h(),C("div",De,[e(J),o("div",je,[o("div",Le,[e(Z)]),o("div",Ve,[e(ee)])])]))}});export{Ge as default};
